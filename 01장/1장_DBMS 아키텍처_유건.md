## 1강 DBMS 아키텍처 개요

![1.png](..%2F..%2F..%2FDownloads%2F1.png)

> *DBMS는 `쿼리 평가 엔진`, `버퍼 매니저`, `디스크 용량 매니저`, `트랜잭션 매니저와 락 매니저`, `리커버리 매니저`로 구성되어 있다.*
>

### 1. 쿼리 평가 엔진

쿼리 평가 엔진은 입력 받은 SQL문을 분석하고, 어떤 순서로 기억장치의 데이터에 집근할지 결정한다.

이때 결정되는 계획은 ‘실행 계획’ ‘Explanin Plan’이라고 부르고, 해당 계획으로 데이터에 접근하는 방법을 ‘접근 메서드’라고 부른다.

요컨대, 쿼리 평가 엔진은 계획을 세우고 실행하는 DBMS의 핵심이다.

### 2. 버퍼 매니저

DBMS는 버퍼라는 메모리 영역을 확보하는데 이 버퍼를 관리하는 것이 버퍼 매니저다.

### 3. 디스크 용량 매니저

디스크 용량 매니저는 어디에 어떻게 데이터를 저장할지 관리하며, 데이터의 읽고 쓰기를 제어한다.

### 4. 트랜잭션 매니저와 락 매니저

DB에서 진행되는 작업은 ‘트랜잭션’이라는 단위로 관리된다.

이러한 트랜잭션의 정합성(값이 서로 일치하는 상태)을 유지하고 필요에 따라 데이터에 락을 걸어 다른 사람의 요청을 대기시키는 것이 트랜잭션 매니저와 락 매니저의 역할이다.

### 5. 리커버리 매니저

삭제되면 안 되는 데이터를 정기적으로 백업하고, 문제 발생 시 복구시켜주는 역할을 수행한다.

## 2강 DBMS와 버퍼

### 1. 공짜 밥은 존재할까?

‘기억 비용’이란 데이터를 저장하는데 소모되는 비용이다. 일반적으로 하드디스크는 저렴하고 용량이 크지만 속도가 느리고, 메모리는 비싸고 용량이 작지만 속도가 빠르다.

즉, 데이터 저장에는 트레이드 오프가 따른다.

### 2. DBMS와 기억장치의 관계

**하드디스크**

- 2차 기억장치
- 데이터를 영속적으로 저장
- 조회 속도는 느림

**메모리**

- 1차 기억장치(조회 속도가 빠름)
- 비영속적
- 디스크에 비해 기억 비용이 비쌈

**버퍼를 활용한 속도 향상**

- 자주 접근하는 데이터를 메모리에 저장해 성능 개선
- 성능 향상을 목적으로 저장하는 메모리 == `버퍼` OR `캐시`

### 3. 메모리 위에 있는 두 개의 버퍼

**데이터 캐시**

- 디스크에 있는 일부 데이터를 메모리에 유지하기 위해 사용하는 메모리 영역

**로그 버퍼**

- 갱신과 관련된 명령어를 저장
- 모아서 전송

## 3강 DBMS와 실행 계획

> *사용자는 데이터가 저장된 위치와 접근하는 방법을 알 필요 없다.*
>

### 1. 권한 이양의 죄악

RDB에서 사용자가 하는 일은 대상(What)을 기술하는 것으로 축소된다.

이는 비즈니스 전체의 생산성 향상하기 때문이다.

이로 인해, RDB는 세계적인 점유률을 얻었지만 여전히 다루기 어려워하는 사람이 많다.

### 2. 데이터에 접근하는 방법은 어떻게 결정할까?

![2.png](..%2F..%2F..%2FDownloads%2F2.png)

**파서**

- 구문 분석
- 입력 받은 구문이 올바른지

**옵티마이저**

- 다양한 조건을 고려해서 선택 가능한 많은 실행 계획을 작성
- 가장 낮은 비용을 가진 계획을 선택

**카탈로그 매니저**

- 옵티마이저가 실행 계획을 세울 때 옵티마이저에 중요한 정보를 제공

> `카탈로그` : DBMS의 내부 정보를 모아놓은 테이블, ‘**통계 정보**’라고 불림
>

**플랜 평가**

- 옵티마이저가 최적의 실행 결과를 선택하는 것

## 4강 실행 계획이 SQL 구문의 성능을 결정

### 1. 실행 계획 확인 방법

| Oracle | set autotrace traceonly |
| --- | --- |
| MySQL | EXPLAIN (EXTENDED) SQL 구문 |
| PostgreSQL | EXPLAIN SQL 구문 |

### 2. 테이블 풀 스캔의 실행 계획

테이블

![3.png](..%2F..%2F..%2FDownloads%2F3.png)

**코드**

```yaml
explain
select *
from problem;
```

**실행 결과**

![4.png](..%2F..%2F..%2FDownloads%2F4.png)

실행 결과에서 중요한 것은 `조작 대상 객체`, `객체에 대한 조작의 종류`, `조작 대상이 되는 레코드 수` 세 가지다.

**조작 대상 객체**

- 실행 결과에서 `table` 부분

**객체에 대한 조작의 종류**

- 실행 결과에서 `type` 부분

**조작 대상이 되는 레코드 수**

- 실행 결과에서 `rows` 부분